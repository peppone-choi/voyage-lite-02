## 요구사항

### 기능적
- 유저는 대기열 토큰을 발급 할 수 있어야 한다.
- 유저는 토큰으로 대기열 토큰 정보를 확인할 수 있다.
- 유저는 예약 가능한 날짜 목록을 조회할 수 있다.
- 유저는 날짜 정보를 입력하여 해당 날짜의 좌석을 조회할 수 있다.
- 유저는 날짜와 좌석 정보를 입력 받아 좌석을 예약 처리할 수 있다.
- 유저는 유저별로 결제에 사용 할 잔액을 충전할 수 있다.
- 유저는 유저별로 결제에 사용 할 잔액을 조회할 수 있다.
- 유저는 결제를 처리하고 결제내역을 생성할 수 있다.

#### 기능 목록
- 유저 대기열 토큰 발급
- 유저 대기열 토큰 정보 확인 (대기 순서)
- 유저 대기열 토큰 Valid
- 예약 가능 날짜 목록 조회
- 예약 가능 좌석 상태 조회
- 좌석 임시 배정 (결제 전 임시 배정)
- 좌석 임시 배정 해제
- 결제 및 결제 내역 생성
- 좌석 소유권 배정
- 유저 대기열 토큰 만료

#### 사용자 시나리오
1. 대기열 토큰 발급
2. 대기열 토큰 정보 확인
3. 예약 가능 날짜 조회
4. 예약 가능 좌석 상태 조회
5. 좌석 예약 요청 및 5분간 좌석 임시 배정
6. 잔액 조회
7. 잔액 충전 (잔액이 충분 할 시, 선택적)
8. 임시 배정한 좌석에 대해 결제
9. 대기열 토큰 만료 (결제 성공 시)

### 비기능적
- 최대 2초 안 응답
- 좌석 예약 요청 시 동시성을 고려하여 처리 (요청 1순위에게 무조건 임시 배정. 그 후에겐 이미 임시 배정된 좌석입니다. 출력) -> 시퀀스 다이어그램 작성
- 모놀리식으로 할 것인지 MSA로 할 것인지에 대한 고민 필요.
- HTTPS 필수
- 인증 (대기열 토큰 발급), 인가 (대기열 토큰으로 이후 API 사용시 Valid)
- 토큰 발급, 예약 가능 날짜 조회, 좌석 상태 조회, 좌석 예약 요청, 잔액 충전, 결제, 좌석 확정, 대기열 토큰 만료 시 로깅 추가.

### 규모 추산 및 트래픽 예측

#### 1. 하루 사용자 수 (DAU)
- **평상시**: 10,000 ~ 50,000명
- **인기 공연 오픈 시**: 200,000 ~ 500,000명
- **추정 평균 DAU**: 약 30,000명

#### 2. 동시 접속자 수
- **평상시**: 500 ~ 2,000명
- **티켓 오픈 시간대 (피크)**: 50,000 ~ 100,000명
- **추정 평균**: 약 3,000명

#### 3. 초당 요청 수 (TPS/RPS/QPS)

##### 평상시
- 조회 요청: 100 ~ 500 TPS
- 예약 요청: 10 ~ 50 TPS
- 결제 요청: 5 ~ 20 TPS

##### 피크 시간 (티켓 오픈 직후 10분)
- 대기열 토큰 발급/조회: 20,000 ~ 50,000 TPS
- 좌석 조회: 5,000 ~ 10,000 TPS
- 예약 시도: 1,000 ~ 3,000 TPS
- 결제: 100 ~ 500 TPS

### 기술 스택
- MySQL
- Redis (이후 도입)
- JWT
- Spring Boot 3.x
- Websocket (차례 확인 알림)
